---
import { getSortedPosts } from "../../lib/blog";
import { getEntryBySlug } from "astro:content";
import BlogPost from '../../layouts/BlogPost.astro';

export async function getStaticPaths() {
  const allPosts = await getSortedPosts();
  return allPosts.map((post) => (
    { params: { slug: post.slug } }
  ))
}

const post = await getEntryBySlug('blog', Astro.params.slug);
const { Content } = await post.render();
---

<BlogPost title={post.data.title}>
  <Content />
</BlogPost>
